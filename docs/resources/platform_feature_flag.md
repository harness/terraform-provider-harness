---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harness_platform_feature_flag Resource - terraform-provider-harness"
subcategory: "Next Gen"
description: |-
  Resource for managing Feature Flags.
---

# harness_platform_feature_flag (Resource)

Resource for managing Feature Flags.

## Example Usage

```terraform
// Boolean Flag
resource "harness_platform_feature_flag" "mybooleanflag" {
  org_id     = "test"
  project_id = "testff"

  kind       = "boolean"
  name       = "MY_FEATURE"
  identifier = "MY_FEATURE"
  permanent  = false

  default_on_variation  = "Enabled"
  default_off_variation = "Disabled"

  environment {
    identifier = "MY_ENVIRONMENT"
  }

  variation {
    identifier  = "Enabled"
    name        = "Enabled"
    description = "The feature is enabled"
    value       = "true"
  }

  variation {
    identifier  = "Disabled"
    name        = "Disabled"
    description = "The feature is disabled"
    value       = "false"
  }

  tags {
    identifier = "mytag"
  }
}


// Multivariate flag
resource "harness_platform_feature_flag" "mymultivariateflag" {
  org_id     = "test"
  project_id = "testff"

  kind       = "int"
  name       = "FREE_TRIAL_DURATION"
  identifier = "FREE_TRIAL_DURATION"
  permanent  = false

  default_on_variation  = "trial7"
  default_off_variation = "trial20"

  variation {
    identifier  = "trial7"
    name        = "7 days trial"
    description = "Free trial period 7 days"
    value       = "7"
  }

  variation {
    identifier  = "trial14"
    name        = "14 days trial"
    description = "Free trial period 14 days"
    value       = "14"
  }

  variation {
    identifier  = "trial20"
    name        = "20 days trial"
    description = "Free trial period 20 days"
    value       = "20"
  }
}

// Assign targets to flag
resource "harness_platform_feature_flag" "mymultivariateflag" {
  org_id     = "test"
  project_id = "testff"

  kind       = "int"
  name       = "FREE_TRIAL_DURATION"
  identifier = "FREE_TRIAL_DURATION"
  permanent  = false

  default_on_variation  = "trial7"
  default_off_variation = "trial20"

  variation {
    identifier  = "trial7"
    name        = "7 days trial"
    description = "Free trial period 7 days"
    value       = "7"
  }

  variation {
    identifier  = "trial14"
    name        = "14 days trial"
    description = "Free trial period 14 days"
    value       = "14"
  }

  variation {
    identifier  = "trial20"
    name        = "20 days trial"
    description = "Free trial period 20 days"
    value       = "20"
  }

  environment {
    identifier = "MY_ENVIRONMENT"
    add_target_rule {
      variation = "trial14"
      targets   = ["targets1", "targets2"]
    }
  }
}

// Assign target groups to flag
resource "harness_platform_feature_flag" "mymultivariateflag" {
  org_id     = "test"
  project_id = "testff"

  kind       = "int"
  name       = "FREE_TRIAL_DURATION"
  identifier = "FREE_TRIAL_DURATION"
  permanent  = false

  default_on_variation  = "trial7"
  default_off_variation = "trial20"

  variation {
    identifier  = "trial7"
    name        = "7 days trial"
    description = "Free trial period 7 days"
    value       = "7"
  }

  variation {
    identifier  = "trial14"
    name        = "14 days trial"
    description = "Free trial period 14 days"
    value       = "14"
  }

  variation {
    identifier  = "trial20"
    name        = "20 days trial"
    description = "Free trial period 20 days"
    value       = "20"
  }

  environment {
    identifier = "MY_ENVIRONMENT"
    add_target_groups_rule {
      group_name = "group_name"
      variation  = "trial14"
      distribution = {
        variations = [
          {
            variation = "trial7"
            weight    = 30
          },
          {
            variation = "trial14"
            weight    = 30
          },
          {
            variation = "trial20"
            weight    = 40
          }
        ]
      }
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `default_off_variation` (String) Which of the variations to use when the flag is toggled to off state
- `default_on_variation` (String) Which of the variations to use when the flag is toggled to on state
- `identifier` (String) Identifier of the Feature Flag
- `kind` (String) The type of data the flag represents. Valid values are `boolean`, `int`, `string`, `json`
- `name` (String) Name of the Feature Flag
- `org_id` (String) Organization Identifier
- `permanent` (Boolean) Whether or not the flag is permanent. If it is, it will never be flagged as stale
- `project_id` (String) Project Identifier
- `variation` (Block List, Min: 2) The options available for your flag (see [below for nested schema](#nestedblock--variation))

### Optional

- `archived` (Boolean) Whether or not the flag is archived.
- `description` (String) Description of the Feature Flag
- `environment` (Block List) Environment Identifier (see [below for nested schema](#nestedblock--environment))
- `owner` (String) The owner of the flag
- `tags` (Block List) The tags for the flag (see [below for nested schema](#nestedblock--tags))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--variation"></a>
### Nested Schema for `variation`

Required:

- `description` (String) The description of the variation
- `identifier` (String) The identifier of the variation
- `name` (String) The user friendly name of the variation
- `value` (String) The value of the variation


<a id="nestedblock--environment"></a>
### Nested Schema for `environment`

Required:

- `identifier` (String) Identifier of the Environment

Optional:

- `add_target_rule` (Block List) The targeting rules for the flag (see [below for nested schema](#nestedblock--environment--add_target_rule))
- `default_off_variation` (String) Default variation to be served when flag is 'off'
- `default_on_variation` (String) Default variation to be served when flag is 'on'
- `state` (String) State of the flag in this environment. Possible values are 'on' and 'off'

<a id="nestedblock--environment--add_target_rule"></a>
### Nested Schema for `environment.add_target_rule`

Optional:

- `targets` (List of String) The targets that should be served this variation
- `variation` (String) The identifier of the variation



<a id="nestedblock--tags"></a>
### Nested Schema for `tags`

Required:

- `identifier` (String) The identifier of the tag

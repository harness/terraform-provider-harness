---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harness_platform_feature_flag Resource - terraform-provider-harness"
subcategory: "Next Gen"
description: |-
  Resource for managing Feature Flags.
---

# harness_platform_feature_flag (Resource)

Resource for managing Feature Flags.

## Example Usage

```terraform
// Boolean Flag
resource "harness_platform_feature_flag" "mybooleanflag" {
  org_id     = "test"
  project_id = "testff"

  kind       = "boolean"
  name       = "MY_FEATURE"
  identifier = "MY_FEATURE"
  permanent  = false

  default_on_variation  = "Enabled"
  default_off_variation = "Disabled"

  variation {
    identifier  = "Enabled"
    name        = "Enabled"
    description = "The feature is enabled"
    value       = "true"
  }

  variation {
    identifier  = "Disabled"
    name        = "Disabled"
    description = "The feature is disabled"
    value       = "false"
  }
}


// Multivariate flag
resource "harness_platform_feature_flag" "mymultivariateflag" {
  org_id     = "test"
  project_id = "testff"

  kind       = "int"
  name       = "FREE_TRIAL_DURATION"
  identifier = "FREE_TRIAL_DURATION"
  permanent  = false

  default_on_variation  = "trial7"
  default_off_variation = "trial20"

  variation {
    identifier  = "trial7"
    name        = "7 days trial"
    description = "Free trial period 7 days"
    value       = "7"
  }

  variation {
    identifier  = "trial14"
    name        = "14 days trial"
    description = "Free trial period 14 days"
    value       = "14"
  }

  variation {
    identifier  = "trial20"
    name        = "20 days trial"
    description = "Free trial period 20 days"
    value       = "20"
  }
}

// Assign targets to flag
resource "harness_platform_feature_flag" "mymultivariateflag" {
  org_id     = "test"
  project_id = "testff"

  kind       = "int"
  name       = "FREE_TRIAL_DURATION"
  identifier = "FREE_TRIAL_DURATION"
  permanent  = false

  default_on_variation  = "trial7"
  default_off_variation = "trial20"

  variation {
    identifier  = "trial7"
    name        = "7 days trial"
    description = "Free trial period 7 days"
    value       = "7"
  }

  variation {
    identifier  = "trial14"
    name        = "14 days trial"
    description = "Free trial period 14 days"
    value       = "14"
  }

  variation {
    identifier  = "trial20"
    name        = "20 days trial"
    description = "Free trial period 20 days"
    value       = "20"
  }

  add_target_rules {
    variation = "trial14"
    targets = ["target1", "targets2"]
  }
}

// Assign target groups to flag
resource "harness_platform_feature_flag" "mymultivariateflag" {
  org_id     = "test"
  project_id = "testff"

  kind       = "int"
  name       = "FREE_TRIAL_DURATION"
  identifier = "FREE_TRIAL_DURATION"
  permanent  = false

  default_on_variation  = "trial7"
  default_off_variation = "trial20"

  variation {
    identifier  = "trial7"
    name        = "7 days trial"
    description = "Free trial period 7 days"
    value       = "7"
  }

  variation {
    identifier  = "trial14"
    name        = "14 days trial"
    description = "Free trial period 14 days"
    value       = "14"
  }

  variation {
    identifier  = "trial20"
    name        = "20 days trial"
    description = "Free trial period 20 days"
    value       = "20"
  }

  add_target_groups_rules {
    group_name = "group_name"
    variation = "trial14"
    distribution = {
      variations = [
        {
            variation = "foo"
            weight = 30
        },
        {
            variation = "bat"
            weight = 30
        },
        {
            variation = "name"
            weight = 40
        }
      ]
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `default_off_variation` (String) Which of the variations to use when the flag is toggled to off state
- `default_on_variation` (String) Which of the variations to use when the flag is toggled to on state
- `identifier` (String) Identifier of the Feature Flag
- `kind` (String) The type of data the flag represents. Valid values are `boolean`, `int`, `string`, `json`
- `name` (String) Name of the Feature Flag
- `org_id` (String) Organization Identifier
- `permanent` (Boolean) Whether or not the flag is permanent. If it is, it will never be flagged as stale
- `project_id` (String) Project Identifier
- `variation` (Block List, Min: 2) The options available for your flag (see [below for nested schema](#nestedblock--variation))

### Optional

- `add_target_group_rules` (Block List) The targeting rules for the flag (see [below for nested schema](#nestedblock--add_target_group_rules))
- `add_target_rules` (Block List) The targeting rules for the flag (see [below for nested schema](#nestedblock--add_target_rules))
- `archived` (Boolean) Whether or not the flag is archived
- `git_details` (Block Set, Max: 1) (see [below for nested schema](#nestedblock--git_details))
- `owner` (String) The owner of the flag

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--variation"></a>
### Nested Schema for `variation`

Required:

- `description` (String) The description of the variation
- `identifier` (String) The identifier of the variation
- `name` (String) The user friendly name of the variation
- `value` (String) The value of the variation


<a id="nestedblock--add_target_group_rules"></a>
### Nested Schema for `add_target_group_rules`

Optional:

- `distribution` (Block List) The distribution of the rule (see [below for nested schema](#nestedblock--add_target_group_rules--distribution))
- `group_name` (String) The name of the target group
- `variation` (String) The identifier of the variation. Valid values are `enabled`, `disabled`

<a id="nestedblock--add_target_group_rules--distribution"></a>
### Nested Schema for `add_target_group_rules.distribution`

Optional:

- `variations` (Block List) The variations of the rule (see [below for nested schema](#nestedblock--add_target_group_rules--distribution--variations))

<a id="nestedblock--add_target_group_rules--distribution--variations"></a>
### Nested Schema for `add_target_group_rules.distribution.variations`

Optional:

- `variation` (String) The identifier of the variation
- `weight` (Number) The weight of the variation




<a id="nestedblock--add_target_rules"></a>
### Nested Schema for `add_target_rules`

Optional:

- `targets` (List of String) The targets of the rule
- `variation` (String) The identifier of the variation. Valid values are `enabled`, `disabled`


<a id="nestedblock--git_details"></a>
### Nested Schema for `git_details`

Required:

- `commit_msg` (String) The commit message to use as part of a gitsync operation

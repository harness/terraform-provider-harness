---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harness_platform_infra_provider_version_publish Resource - terraform-provider-harness"
subcategory: "Next Gen"
description: |-
  Resource for publishing Terraform/OpenTofu Provider Versions in the IaCM Provider Registry.
---

# harness_platform_infra_provider_version_publish (Resource)

Resource for publishing Terraform/OpenTofu Provider Versions in the IaCM Provider Registry. Publishing makes the provider version available for use.

## Example Usage

```terraform
# Create a complete provider with version, files, and publish
resource "harness_platform_infra_provider" "aws" {
  type        = "aws"
  description = "AWS provider for IaCM"
}

resource "harness_platform_infra_provider_signing_key" "hashicorp" {
  key_id      = "51852D87348FFC4C"
  key_name    = "HashiCorp Security"
  user        = "security@hashicorp.com"
  ascii_armor = file("${path.module}/hashicorp.asc")
}

resource "harness_platform_infra_provider_version" "aws_v5" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = "5.0.0"
  gpg_key_id  = harness_platform_infra_provider_signing_key.hashicorp.key_id
  protocols   = ["5.0", "6.0"]
}

# Upload all required files
resource "harness_platform_infra_provider_version_file" "aws_linux_amd64" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version
  filename    = "terraform-provider-aws_5.0.0_linux_amd64.zip"
}

resource "harness_platform_infra_provider_version_file" "aws_darwin_amd64" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version
  filename    = "terraform-provider-aws_5.0.0_darwin_amd64.zip"
}

resource "harness_platform_infra_provider_version_file" "aws_shasums" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version
  filename    = "terraform-provider-aws_5.0.0_SHA256SUMS"
}

resource "harness_platform_infra_provider_version_file" "aws_shasums_sig" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version
  filename    = "terraform-provider-aws_5.0.0_SHA256SUMS.sig"
}

# Publish the version after all files are uploaded
resource "harness_platform_infra_provider_version_publish" "aws_v5" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version

  depends_on = [
    harness_platform_infra_provider_version_file.aws_linux_amd64,
    harness_platform_infra_provider_version_file.aws_darwin_amd64,
    harness_platform_infra_provider_version_file.aws_shasums,
    harness_platform_infra_provider_version_file.aws_shasums_sig,
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `provider_id` (String) The ID of the provider.
- `version` (String) Provider version number to publish.

### Read-Only

- `id` (String) The ID of this resource in the format `provider_id/version`.
- `published` (Boolean) Indicates if the provider version is published.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import harness_platform_infra_provider_version_publish.example <provider_id>/<version>
```

## Notes

- Publishing is a **one-way operation**. Once a provider version is published, it cannot be unpublished through Terraform.
- When this resource is destroyed, it is only removed from Terraform state. The provider version remains published in the registry.
- Use `depends_on` to ensure all required files are uploaded before publishing the version.
- A published version becomes available for use in Terraform/OpenTofu configurations.
- Best practice: Publish only after uploading all platform binaries, SHA256SUMS, and signature files.

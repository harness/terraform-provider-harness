---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harness_chaos_action_template Resource - terraform-provider-harness"
subcategory: ""
description: |-
  Resource for managing Harness Chaos Action Templates. Action templates define reusable actions that can be used in chaos experiments.
---

# harness_chaos_action_template (Resource)

Resource for managing Harness Chaos Action Templates. Action templates define reusable actions that can be used in chaos experiments.

## Example Usage

```terraform
# ============================================================================
# Harness Chaos Action Template Resource Examples
# ============================================================================
#
# Action templates define reusable actions for chaos experiments.
# These examples are based on TESTED configurations from the e2e-test suite.
#
# Key Points:
# - Actions can be delay, script, or container type
# - Runtime inputs with defaults: "<+input>.default('value')"
# - Container actions support full Kubernetes pod configuration
# ============================================================================

# ----------------------------------------------------------------------------
# Example 1: Container Action with Runtime Inputs (TESTED ✅)
# ----------------------------------------------------------------------------
# Most common pattern: container action with runtime inputs and defaults

resource "harness_chaos_action_template" "container_with_runtime_inputs" {
  depends_on = [harness_chaos_hub_v2.project_level]

  # Project level
  org_id       = harness_platform_organization.this.id
  project_id   = harness_platform_project.this.id
  hub_identity = harness_chaos_hub_v2.project_level.identity

  identity            = "container-action-template"
  name                = "Container Action Template"
  description         = "Container action with runtime inputs and defaults"
  type                = "container"
  infrastructure_type = "<+input>.default('Kubernetes')"
  tags                = ["container", "kubernetes", "runtime-inputs"]

  # Container action
  container_action {
    image     = "<+input>.default('busybox:latest')"
    command   = ["<+input>.default('sh')"]
    args      = "echo 'Running container action'; sleep 15"
    namespace = "<+input>.default('default')"

    node_selector = {
      disktype = "ssd"
      zone     = "us-west-1a"
    }

    labels = {
      app         = "chaos-action"
      environment = "production"
      managed-by  = "terraform"
    }

    annotations = {
      description = "Chaos container action"
      owner       = "chaos-team"
    }

    env {
      name  = "TEST_VAR"
      value = "<+input>.default('test_value')"
    }

    env {
      name  = "ANOTHER_VAR"
      value = "<+input>.default('another_value')"
    }

    resources {
      limits = {
        cpu    = "500m"
        memory = "512Mi"
      }

      requests = {
        cpu    = "250m"
        memory = "256Mi"
      }
    }
  }

  # Run properties
  run_properties {
    timeout  = "<+input>.default('60s')"
    interval = "<+input>.default('15s')"
  }

  # Variables
  variables {
    name        = "container_image"
    value       = "<+input>"
    type        = "string"
    required    = true
    description = "Container image to use (runtime input)"
  }

  variables {
    name        = "namespace"
    value       = "<+input>"
    type        = "string"
    required    = false
    description = "Kubernetes namespace (runtime input)"
  }
}

# ----------------------------------------------------------------------------
# Example 2: Simple Delay Action (TESTED ✅)
# ----------------------------------------------------------------------------
# Delay action for adding wait time in experiments

resource "harness_chaos_action_template" "delay_action" {
  depends_on = [harness_chaos_hub_v2.project_level]

  org_id       = harness_platform_organization.this.id
  project_id   = harness_platform_project.this.id
  hub_identity = harness_chaos_hub_v2.project_level.identity

  identity            = "delay-action-template"
  name                = "Delay Action Template"
  description         = "Simple delay action for wait time"
  type                = "delay"
  infrastructure_type = "Kubernetes"
  tags                = ["delay", "wait"]

  # Delay action
  delay_action {
    duration = "<+input>.default('30s')"
  }

  # Run properties
  run_properties {
    timeout = "60s"
  }
}

# ----------------------------------------------------------------------------
# Example 3: Script Action (TESTED ✅)
# ----------------------------------------------------------------------------
# Custom script action for flexible operations

resource "harness_chaos_action_template" "script_action" {
  depends_on = [harness_chaos_hub_v2.project_level]

  org_id       = harness_platform_organization.this.id
  project_id   = harness_platform_project.this.id
  hub_identity = harness_chaos_hub_v2.project_level.identity

  identity            = "script-action-template"
  name                = "Script Action Template"
  description         = "Custom script action for chaos operations"
  type                = "script"
  infrastructure_type = "<+input>.default('Kubernetes')"
  tags                = ["script", "custom"]

  # Custom script action
  custom_script_action {
    script = <<-EOT
      #!/bin/bash
      echo "Running custom chaos script"
      echo "Target: <+input>"
      sleep 10
      echo "Script completed"
    EOT
    
    shell = "bash"
    
    env {
      name  = "TARGET"
      value = "<+input>.default('default-target')"
    }
  }

  # Run properties
  run_properties {
    timeout  = "<+input>.default('120s')"
    interval = "30s"
  }

  # Variables
  variables {
    name        = "target_resource"
    value       = "<+input>"
    type        = "string"
    required    = true
    description = "Target resource for the script"
  }
}

# ----------------------------------------------------------------------------
# Key Fields Reference
# ----------------------------------------------------------------------------
# Required:
#   - org_id, project_id (scope)
#   - hub_identity (hub where template is stored)
#   - identity (template identifier)
#   - name (template display name)
#   - type ("delay", "script", or "container")
#   - infrastructure_type (e.g., "Kubernetes", "KubernetesV2")
#   - One of: delay_action, custom_script_action, or container_action
#
# Optional:
#   - description
#   - tags
#   - run_properties (timeout, interval, polling_interval, etc.)
#   - variables (name, value, type, required, description)
#
# Runtime Inputs:
#   - Use "<+input>" for required runtime input
#   - Use "<+input>.default('value')" for optional with default
#
# Computed (read-only):
#   - action_id, created_at, updated_at
#
# Import Format: org_id/project_id/hub_identity/identity
# Example: terraform import harness_chaos_action_template.example \
#          my_org/my_project/my-hub/my-action
# ----------------------------------------------------------------------------
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `hub_identity` (String) Identity of the chaos hub this action template belongs to.
- `identity` (String) Unique identifier for the action template (immutable).
- `name` (String) Name of the action template.
- `type` (String) Type of the action template. Valid values: delay, customScript, container.

### Optional

- `container_action` (Block List, Max: 1) Container action configuration. Required when type is 'container'. (see [below for nested schema](#nestedblock--container_action))
- `custom_script_action` (Block List, Max: 1) Custom script action configuration. Required when type is 'customScript'. (see [below for nested schema](#nestedblock--custom_script_action))
- `delay_action` (Block List, Max: 1) Delay action configuration. Required when type is 'delay'. (see [below for nested schema](#nestedblock--delay_action))
- `description` (String) Description of the action template.
- `infrastructure_type` (String) Infrastructure type for the action template. Valid values: Kubernetes, KubernetesV2, Windows, Linux, CloudFoundry, Container. Supports runtime inputs like <+input>.
- `org_id` (String) Organization identifier.
- `project_id` (String) Project identifier.
- `run_properties` (Block List, Max: 1) Run properties for the action template execution. (see [below for nested schema](#nestedblock--run_properties))
- `tags` (List of String) Tags to associate with the action template.
- `variables` (Block List) Template variables that can be used in the action. (see [below for nested schema](#nestedblock--variables))

### Read-Only

- `account_id` (String) Account identifier.
- `created_at` (Number) Creation timestamp (Unix epoch).
- `created_by` (String) User who created the action template.
- `id` (String) The ID of this resource.
- `id_internal` (String) Internal ID of the action template.
- `is_default` (Boolean) Whether this is the default version for predefined actions.
- `is_enterprise` (Boolean) Whether this is an enterprise action template.
- `is_removed` (Boolean) Whether the action template has been removed.
- `revision` (Number) Revision number of the action template.
- `template` (String) Template content/definition.
- `updated_at` (Number) Last update timestamp (Unix epoch).
- `updated_by` (String) User who last updated the action template.

<a id="nestedblock--container_action"></a>
### Nested Schema for `container_action`

Required:

- `image` (String) Container image to use (e.g., 'busybox:latest').

Optional:

- `annotations` (Map of String) Annotations to apply to the container pod.
- `args` (String) Arguments to pass to the container command.
- `command` (List of String) Command to run in the container.
- `env` (Block List) Environment variables for the container. (see [below for nested schema](#nestedblock--container_action--env))
- `host_ipc` (Boolean) Use host IPC namespace.
- `host_network` (Boolean) Use host network namespace.
- `host_pid` (Boolean) Use host PID namespace.
- `image_pull_policy` (String) Image pull policy (Always, IfNotPresent, Never). Supports runtime inputs like <+input>.allowedValues(...).
- `image_pull_secrets` (List of String) List of image pull secrets for private registries.
- `labels` (Map of String) Labels to apply to the container pod.
- `namespace` (String) Kubernetes namespace for the container.
- `node_selector` (Map of String) Node selector for pod scheduling.
- `resources` (Block List, Max: 1) Resource requirements for the container. (see [below for nested schema](#nestedblock--container_action--resources))
- `service_account_name` (String) Kubernetes service account name.
- `tolerations` (Block List) Tolerations for pod scheduling on tainted nodes. (see [below for nested schema](#nestedblock--container_action--tolerations))
- `volume_mounts` (Block List) Volume mounts for the container. (see [below for nested schema](#nestedblock--container_action--volume_mounts))
- `volumes` (Block List) Volumes to attach to the pod. (see [below for nested schema](#nestedblock--container_action--volumes))

<a id="nestedblock--container_action--env"></a>
### Nested Schema for `container_action.env`

Required:

- `name` (String) Environment variable name.

Optional:

- `value` (String) Environment variable value.


<a id="nestedblock--container_action--resources"></a>
### Nested Schema for `container_action.resources`

Optional:

- `limits` (Map of String) Resource limits.
- `requests` (Map of String) Resource requests.


<a id="nestedblock--container_action--tolerations"></a>
### Nested Schema for `container_action.tolerations`

Optional:

- `effect` (String) Taint effect (NoSchedule, PreferNoSchedule, NoExecute).
- `key` (String) Taint key to tolerate.
- `operator` (String) Operator (Exists, Equal).
- `toleration_seconds` (Number) Toleration seconds for NoExecute effect.
- `value` (String) Taint value to tolerate.


<a id="nestedblock--container_action--volume_mounts"></a>
### Nested Schema for `container_action.volume_mounts`

Required:

- `mount_path` (String) Path to mount the volume in the container.
- `name` (String) Volume name to mount.

Optional:

- `read_only` (Boolean) Mount as read-only.
- `sub_path` (String) Sub-path within the volume.


<a id="nestedblock--container_action--volumes"></a>
### Nested Schema for `container_action.volumes`

Required:

- `name` (String) Volume name.

Optional:

- `config_map` (Block List, Max: 1) ConfigMap volume configuration. (see [below for nested schema](#nestedblock--container_action--volumes--config_map))
- `empty_dir` (Block List, Max: 1) EmptyDir volume configuration. (see [below for nested schema](#nestedblock--container_action--volumes--empty_dir))
- `host_path` (Block List, Max: 1) HostPath volume configuration. (see [below for nested schema](#nestedblock--container_action--volumes--host_path))
- `persistent_volume_claim` (Block List, Max: 1) PersistentVolumeClaim configuration. (see [below for nested schema](#nestedblock--container_action--volumes--persistent_volume_claim))
- `secret` (Block List, Max: 1) Secret volume configuration. (see [below for nested schema](#nestedblock--container_action--volumes--secret))

<a id="nestedblock--container_action--volumes--config_map"></a>
### Nested Schema for `container_action.volumes.config_map`

Required:

- `name` (String) ConfigMap name.

Optional:

- `optional` (Boolean) Whether the ConfigMap is optional.


<a id="nestedblock--container_action--volumes--empty_dir"></a>
### Nested Schema for `container_action.volumes.empty_dir`

Optional:

- `medium` (String) Storage medium (empty string for default, Memory for tmpfs).
- `size_limit` (String) Size limit (e.g., '1Gi').


<a id="nestedblock--container_action--volumes--host_path"></a>
### Nested Schema for `container_action.volumes.host_path`

Required:

- `path` (String) Host path.

Optional:

- `type` (String) Host path type (Directory, File, etc.).


<a id="nestedblock--container_action--volumes--persistent_volume_claim"></a>
### Nested Schema for `container_action.volumes.persistent_volume_claim`

Required:

- `claim_name` (String) PVC name.

Optional:

- `read_only` (Boolean) Mount as read-only.


<a id="nestedblock--container_action--volumes--secret"></a>
### Nested Schema for `container_action.volumes.secret`

Required:

- `secret_name` (String) Secret name.

Optional:

- `optional` (Boolean) Whether the Secret is optional.




<a id="nestedblock--custom_script_action"></a>
### Nested Schema for `custom_script_action`

Required:

- `command` (String) Command to execute (e.g., 'bash', 'python', 'sh').

Optional:

- `args` (List of String) Arguments to pass to the command.
- `env` (Block List) Environment variables for the script. (see [below for nested schema](#nestedblock--custom_script_action--env))

<a id="nestedblock--custom_script_action--env"></a>
### Nested Schema for `custom_script_action.env`

Required:

- `name` (String) Environment variable name.
- `value` (String) Environment variable value.



<a id="nestedblock--delay_action"></a>
### Nested Schema for `delay_action`

Required:

- `duration` (String) Duration of the delay (e.g., '30s', '5m', '1h').


<a id="nestedblock--run_properties"></a>
### Nested Schema for `run_properties`

Optional:

- `initial_delay` (String) Initial delay before action execution (e.g., '5s', '1m').
- `interval` (String) Interval between retries (e.g., '10s', '30s').
- `max_retries` (Number) Maximum number of retries.
- `stop_on_failure` (Boolean) Whether to stop on failure.
- `timeout` (String) Timeout for action execution (e.g., '5m', '10m').
- `verbosity` (String) Verbosity level for logging.


<a id="nestedblock--variables"></a>
### Nested Schema for `variables`

Required:

- `name` (String) Variable name.
- `value` (String) Variable value.

Optional:

- `description` (String) Variable description.
- `required` (Boolean) Whether the variable is required.
- `type` (String) Variable type (e.g., 'string', 'number', 'boolean').

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# Example 1: Import Project-level Action Template
# Format: org_id/project_id/hub_identity/template_identity
terraform import harness_chaos_action_template.example \
  my_org/my_project/my-chaos-hub/delay-action-template

# Example 2: Import Org-level Action Template  
# Format: org_id/hub_identity/template_identity
terraform import harness_chaos_action_template.org_example \
  my_org/org-chaos-hub/org-script-action

# Example 3: Import Account-level Action Template
# Format: hub_identity/template_identity
terraform import harness_chaos_action_template.account_example \
  account-chaos-hub/account-delay-action
```

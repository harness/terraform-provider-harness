---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harness_platform_gitops_app_project Resource - terraform-provider-harness"
subcategory: "Next Gen"
description: |-
  
---

# harness_platform_gitops_app_project (Resource)



## Example Usage

```terraform
// Create gitOps project with account level agent
resource "harness_platform_gitops_app_project" "test" {
  account_id = "account_id"
  agent_id   = "account.agent_id"
  upsert     = true
  project {
    metadata {
      name       = "name"
      namespace  = "rollouts" //Namespace where agent is installed
      finalizers = ["resources-finalizer.argocd.argoproj.io"]
      labels = {
        v1 = "k1"
      }
      annotations = {
        v1 = "k1"
      }
    }
    spec {
      cluster_resource_whitelist {
        group = "*"
        kind  = "Namespace"
      }
      destinations {
        namespace = "guestbook"
        server    = "https://kubernetes.default.svc"
        name      = "in-cluster"
      }
      roles {
        name        = "read-only"
        description = "Read-only privileges to my-project"
        policies    = ["p, proj:%[3]s:read-only, applications, get, %[3]s/*, allow"]
        groups      = ["my-oidc-group"]
      }
      roles {
        name        = "ci-role"
        description = "Sync privileges for guestbook-dev"
        policies    = ["p, proj:%[3]s:ci-role, applications, sync, %[3]s/guestbook-dev, allow"]
        jwt_tokens {
          iat = "1535390316"
        }
      }
      sync_windows {
        kind         = "allow"
        schedule     = "10 1 * * *"
        duration     = "1h"
        applications = ["*-prod"]
        manual_sync  = "true"
      }
      sync_windows {
        kind       = "deny"
        schedule   = "0 22 * * *"
        duration   = "1h"
        namespaces = ["default"]
      }
      sync_windows {
        kind     = "allow"
        schedule = "0 23 * * *"
        duration = "1h"
        clusters = ["in-cluster", "cluster1"]
      }
      namespace_resource_blacklist {
        group = "group"
        kind  = "ResourceQuota"
      }
      namespace_resource_blacklist {
        group = "group2"
        kind  = "LimitRange"
      }
      namespace_resource_blacklist {
        group = "group3"
        kind  = "NetworkPolicy"
      }
      namespace_resource_whitelist {
        group = "apps"
        kind  = "Deployment"
      }
      namespace_resource_whitelist {
        group = "apps"
        kind  = "StatefulSet"
      }
      orphaned_resources {
        warn = "false"
      }
      source_repos = ["*"]
    }
  }
}

// Create gitOps project with project level agent
resource "harness_platform_gitops_app_project" "test" {
  account_id = "account_id"
  agent_id   = "agent_id"
  upsert     = true
  project_id = "project_id"
  org_id     = "org_id"
  project {
    metadata {
      name       = "name"
      namespace  = "rollouts" //Namespace where agent is installed
      finalizers = ["resources-finalizer.argocd.argoproj.io"]
      labels = {
        v1 = "k1"
      }
      annotations = {
        v1 = "k1"
      }
    }
    spec {
      cluster_resource_whitelist {
        group = "*"
        kind  = "Namespace"
      }
      destinations {
        namespace = "guestbook"
        server    = "https://kubernetes.default.svc"
        name      = "in-cluster"
      }
      roles {
        name        = "read-only"
        description = "Read-only privileges to my-project"
        policies    = ["p, proj:%[3]s:read-only, applications, get, %[3]s/*, allow"]
        groups      = ["my-oidc-group"]
      }
      roles {
        name        = "ci-role"
        description = "Sync privileges for guestbook-dev"
        policies    = ["p, proj:%[3]s:ci-role, applications, sync, %[3]s/guestbook-dev, allow"]
        jwt_tokens {
          iat = "1535390316"
        }
      }
      sync_windows {
        kind         = "allow"
        schedule     = "10 1 * * *"
        duration     = "1h"
        applications = ["*-prod"]
        manual_sync  = "true"
      }
      sync_windows {
        kind       = "deny"
        schedule   = "0 22 * * *"
        duration   = "1h"
        namespaces = ["default"]
      }
      sync_windows {
        kind     = "allow"
        schedule = "0 23 * * *"
        duration = "1h"
        clusters = ["in-cluster", "cluster1"]
      }
      namespace_resource_blacklist {
        group = "group"
        kind  = "ResourceQuota"
      }
      namespace_resource_blacklist {
        group = "group2"
        kind  = "LimitRange"
      }
      namespace_resource_blacklist {
        group = "group3"
        kind  = "NetworkPolicy"
      }
      namespace_resource_whitelist {
        group = "apps"
        kind  = "Deployment"
      }
      namespace_resource_whitelist {
        group = "apps"
        kind  = "StatefulSet"
      }
      orphaned_resources {
        warn = "false"
      }
      source_repos = ["*"]
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `agent_id` (String) Agent identifier of the agent where argo project will exist (include scope prefix)
- `project` (Block List, Min: 1, Max: 1) GitOps project configuration. (see [below for nested schema](#nestedblock--project))

### Optional

- `account_id` (String, Deprecated) Account identifier of the GitOps Agent where argo project will exist.
- `org_id` (String) Org identifier of the GitOps Agent where argo project is to be created.
- `project_id` (String) Project identifier of the Gitops Agent where argo project is to be created.
- `query_name` (String) Identifier for the GitOps Argo project.
- `upsert` (Boolean) Indicates if the argo project should be updated if existing and inserted if not.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--project"></a>
### Nested Schema for `project`

Required:

- `metadata` (Block List, Min: 1, Max: 1) K8s object metadata for the Argo project. (see [below for nested schema](#nestedblock--project--metadata))
- `spec` (Block List, Min: 1, Max: 1) Specification details for the Argo project. (see [below for nested schema](#nestedblock--project--spec))

<a id="nestedblock--project--metadata"></a>
### Nested Schema for `project.metadata`

Optional:

- `annotations` (Map of String) Annotations associated with the GitOps project.
- `cluster_name` (String) Name of the cluster associated with the GitOps project.
- `finalizers` (List of String) Finalizers associated with the GitOps project.
- `labels` (Map of String) Labels associated with the GitOps project.
- `managed_fields` (Block List) Managed fields associated with the GitOps project. (see [below for nested schema](#nestedblock--project--metadata--managed_fields))
- `name` (String) Name of the GitOps project.
- `namespace` (String) Namespace of the GitOps project. This must be the same as the namespace where the agent is installed
- `resource_version` (String) Resource Version for the GitOps project

<a id="nestedblock--project--metadata--managed_fields"></a>
### Nested Schema for `project.metadata.managed_fields`

Optional:

- `api_version` (String) API version of the operation performed.
- `fields_type` (String) Type of the fields in the GitOps project.
- `fields_v1` (Map of String) Raw fields associated with the GitOps project.
- `manager` (String) Manager responsible for the operation.
- `operation` (String) Operation type performed on the GitOps project.
- `subresource` (String) Subresource associated with the GitOps project.
- `time` (Map of String) Timestamp of the operation.



<a id="nestedblock--project--spec"></a>
### Nested Schema for `project.spec`

Optional:

- `cluster_resource_blacklist` (Block List) Cluster resource blacklist for the GitOps project. (see [below for nested schema](#nestedblock--project--spec--cluster_resource_blacklist))
- `cluster_resource_whitelist` (Block List) Cluster resource whitelist for the Argo project. (see [below for nested schema](#nestedblock--project--spec--cluster_resource_whitelist))
- `description` (String) Description of the Argo project.
- `destinations` (Block List) Allowed destinations for applications in this Argo project. (see [below for nested schema](#nestedblock--project--spec--destinations))
- `namespace_resource_blacklist` (Block List) Namespace resource blacklist for the Argo project. (see [below for nested schema](#nestedblock--project--spec--namespace_resource_blacklist))
- `namespace_resource_whitelist` (Block List) Namespace resource whitelist for the GitOps project. (see [below for nested schema](#nestedblock--project--spec--namespace_resource_whitelist))
- `orphaned_resources` (Block List) OrphanedResources specifies if agent should monitor orphaned resources of apps in this project (see [below for nested schema](#nestedblock--project--spec--orphaned_resources))
- `permit_only_project_scoped_clusters` (Boolean) This option determines whether destinations can only reference clusters which are argo project-scoped
- `roles` (Block List) Roles associated with the Argo project. (see [below for nested schema](#nestedblock--project--spec--roles))
- `signature_keys` (Block List) Signature keys for the GitOps project. (see [below for nested schema](#nestedblock--project--spec--signature_keys))
- `source_namespaces` (List of String) Source namespaces defines the namespaces application resources are allowed to be created in.
- `source_repos` (List of String) Allowed Source repositories for the Argo project.
- `sync_windows` (Block List) Synchronization windows for the GitOps project. (see [below for nested schema](#nestedblock--project--spec--sync_windows))

<a id="nestedblock--project--spec--cluster_resource_blacklist"></a>
### Nested Schema for `project.spec.cluster_resource_blacklist`

Optional:

- `group` (String) Group of the cluster resource blacklist.
- `kind` (String) Kind of the cluster resource blacklist.


<a id="nestedblock--project--spec--cluster_resource_whitelist"></a>
### Nested Schema for `project.spec.cluster_resource_whitelist`

Optional:

- `group` (String) Group of the cluster resource whitelist.
- `kind` (String) Kind of the cluster resource whitelist.


<a id="nestedblock--project--spec--destinations"></a>
### Nested Schema for `project.spec.destinations`

Optional:

- `name` (String) Name of the destination cluster.
- `namespace` (String) Permitted Namespaces for deployment in the destination cluster.
- `server` (String) Server URL of the destination cluster.


<a id="nestedblock--project--spec--namespace_resource_blacklist"></a>
### Nested Schema for `project.spec.namespace_resource_blacklist`

Optional:

- `group` (String) Group of the namespace resource blacklist.
- `kind` (String) Kind of the namespace resource blacklist.


<a id="nestedblock--project--spec--namespace_resource_whitelist"></a>
### Nested Schema for `project.spec.namespace_resource_whitelist`

Optional:

- `group` (String) Group of the namespace resource whitelist.
- `kind` (String) Kind of the namespace resource whitelist.


<a id="nestedblock--project--spec--orphaned_resources"></a>
### Nested Schema for `project.spec.orphaned_resources`

Optional:

- `ignore` (Block List) List of ignored orphaned resources. (see [below for nested schema](#nestedblock--project--spec--orphaned_resources--ignore))
- `warn` (Boolean) Whether to warn about orphaned resources.

<a id="nestedblock--project--spec--orphaned_resources--ignore"></a>
### Nested Schema for `project.spec.orphaned_resources.ignore`

Optional:

- `group` (String) Group of the ignored orphaned resource.
- `kind` (String) Kind of the ignored orphaned resource.
- `name` (String) Name of the ignored orphaned resource.



<a id="nestedblock--project--spec--roles"></a>
### Nested Schema for `project.spec.roles`

Required:

- `description` (String) Description of the role.
- `name` (String) Name of the role.

Optional:

- `groups` (List of String) Groups associated with the role.
- `jwt_tokens` (Block List) JWT tokens associated with the role. (see [below for nested schema](#nestedblock--project--spec--roles--jwt_tokens))
- `policies` (List of String) Policies associated with the role. These are argo RBAC policies and may not necessarily reflect in harness.

<a id="nestedblock--project--spec--roles--jwt_tokens"></a>
### Nested Schema for `project.spec.roles.jwt_tokens`

Optional:

- `exp` (String) Expiration time of the JWT token.
- `iat` (String) Issued At time of the JWT token.
- `id` (String) ID of the JWT token.



<a id="nestedblock--project--spec--signature_keys"></a>
### Nested Schema for `project.spec.signature_keys`

Optional:

- `key_id` (String) ID of the signature key.


<a id="nestedblock--project--spec--sync_windows"></a>
### Nested Schema for `project.spec.sync_windows`

Optional:

- `applications` (List of String) Applications associated with synchronization window.
- `clusters` (List of String) Clusters associated with synchronization window.
- `duration` (String) Duration of synchronization window.
- `kind` (String) Kind of synchronization window.
- `manual_sync` (Boolean) Whether manual synchronization is enabled.
- `namespaces` (List of String) Namespaces associated with synchronization window.
- `schedule` (String) Schedule of synchronization window.
- `time_zone` (String) Time zone of synchronization window.

## Import

Import is supported using the following syntax:

```shell
# Import gitOps project with account level agent
terraform import harness_platform_gitops_app_project.example <agent_id>/<app_proj_name>

# Import gitOps project with org level agent
terraform import harness_platform_gitops_app_project.example <organization_id>/<agent_id>/<app_proj_name>

# Import gitOps project with project level agent
terraform import harness_platform_gitops_app_project.example <organization_id>/<project_id>/<agent_id>/<app_proj_name>
```

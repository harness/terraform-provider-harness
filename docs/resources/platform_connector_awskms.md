---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harness_platform_connector_awskms Resource - terraform-provider-harness"
subcategory: "Next Gen"
description: |-
  Resource for creating an AWS KMS connector.
---

# harness_platform_connector_awskms (Resource)

Resource for creating an AWS KMS connector.

References:
- For details on how to onboard with Terraform, please see [Harness Terraform Provider Overview](https://developer.harness.io/docs/platform/automation/terraform/harness-terraform-provider-overview/)
- To understand how to use AWS KMS, please see [Documentation](https://developer.harness.io/docs/platform/secrets/secrets-management/add-an-aws-kms-secrets-manager)
- To get more information about Api, please see [API documentation](https://apidocs.harness.io/tag/Connectors)

## Example Usage

```terraform
# Credentials assume_role
resource "harness_platform_connector_awskms" "test" {
  identifier  = "identifer"
  name        = "name"
  description = "test"
  tags        = ["foo:bar"]

  arn_ref            = "account.secret_id"
  region             = "us-east-1"
  delegate_selectors = ["harness-delegate"]
  credentials {
    assume_role {
      role_arn    = "somerolearn"
      external_id = "externalid"
      duration    = 900
    }
  }
}

# Credentials manual
resource "harness_platform_connector_awskms" "test" {
  identifier  = "identifer"
  name        = "name"
  description = "test"
  tags        = ["foo:bar"]


  arn_ref            = "account.secret_id"
  region             = "us-east-1"
  delegate_selectors = ["harness-delegate"]
  credentials {
    manual {
      secret_key_ref = "account.secret_id"
      access_key_ref = "account.secret_id"
    }
  }
}

# Credentials manual as Default Secret Manager
resource "harness_platform_connector_awskms" "test" {
  identifier  = "identifer"
  name        = "name"
  description = "test"
  tags        = ["foo:bar"]


  arn_ref            = "account.secret_id"
  region             = "us-east-1"
  delegate_selectors = ["harness-delegate"]
  default            = true
  credentials {
    manual {
      secret_key_ref = "account.secret_id"
      access_key_ref = "account.secret_id"
    }
  }
}

# Credentials inherit_from_delegate
resource "harness_platform_connector_awskms" "test" {
  identifier  = "identifer"
  name        = "name"
  description = "test"
  tags        = ["foo:bar"]

  arn_ref            = "account.secret_id"
  region             = "us-east-1"
  delegate_selectors = ["harness-delegate"]
  credentials {
    inherit_from_delegate = true
  }
}

# Credentials OIDC using Harness Platform
resource "harness_platform_connector_awskms" "test" {
  identifier          = "%[1]s"
  name                = "%[1]s"
  description         = "test"
  tags                = ["foo:bar"]
  arn_ref             = "account.secret_id"
  region              = "us-east-1"
  execute_on_delegate = false
  credentials {
    oidc_authentication {
      iam_role_arn = "somerolearn"
    }
  }
}

# Credentials OIDC using Delegate
resource "harness_platform_connector_awskms" "test" {
  identifier         = "%[1]s"
  name               = "%[1]s"
  description        = "test"
  tags               = ["foo:bar"]
  arn_ref            = "account.secret_id"
  region             = "us-east-1"
  delegate_selectors = ["harness-delegate"]
  credentials {
    oidc_authentication {
      iam_role_arn = "somerolearn"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `arn_ref` (String) A reference to the Harness secret containing the ARN of the AWS KMS. To reference a secret at the organization scope, prefix 'org' to the expression: org.{identifier}. To reference a secret at the account scope, prefix 'account` to the expression: account.{identifier}.
- `credentials` (Block List, Min: 1, Max: 1) Credentials to connect to AWS. (see [below for nested schema](#nestedblock--credentials))
- `identifier` (String) Unique identifier of the resource.
- `name` (String) Name of the resource.
- `region` (String) The AWS region where the AWS Secret Manager is.

### Optional

- `default` (Boolean) Set this connector as the default for all the services.
- `delegate_selectors` (Set of String) Tags to filter delegates for connection.
- `description` (String) Description of the resource.
- `execute_on_delegate` (Boolean) Execute the command on the delegate.
- `org_id` (String) Unique identifier of the organization.
- `project_id` (String) Unique identifier of the project.
- `tags` (Set of String) Tags to associate with the resource.

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--credentials"></a>
### Nested Schema for `credentials`

Optional:

- `assume_role` (Block List, Max: 1) Connect using STS assume role. (see [below for nested schema](#nestedblock--credentials--assume_role))
- `inherit_from_delegate` (Boolean) Inherit the credentials from from the delegate.
- `manual` (Block List, Max: 1) Specify the AWS key and secret used for authenticating. (see [below for nested schema](#nestedblock--credentials--manual))
- `oidc_authentication` (Block List, Max: 1) Connect using OIDC authentication. (see [below for nested schema](#nestedblock--credentials--oidc_authentication))

<a id="nestedblock--credentials--assume_role"></a>
### Nested Schema for `credentials.assume_role`

Required:

- `duration` (Number) The duration, in seconds, of the role session. The value can range from 900 seconds (15 minutes) to 3600 seconds (1 hour). By default, the value is set to 3600 seconds. An expiration can also be specified in the client request body. The minimum value is 1 hour.
- `role_arn` (String) The ARN of the role to assume.

Optional:

- `external_id` (String) If the administrator of the account to which the role belongs provided you with an external ID, then enter that value.


<a id="nestedblock--credentials--manual"></a>
### Nested Schema for `credentials.manual`

Required:

- `access_key_ref` (String) The reference to the Harness secret containing the AWS access key. To reference a secret at the organization scope, prefix 'org' to the expression: org.{identifier}. To reference a secret at the account scope, prefix 'account` to the expression: account.{identifier}.
- `secret_key_ref` (String) The reference to the Harness secret containing the AWS secret key. To reference a secret at the organization scope, prefix 'org' to the expression: org.{identifier}. To reference a secret at the account scope, prefix 'account` to the expression: account.{identifier}.


<a id="nestedblock--credentials--oidc_authentication"></a>
### Nested Schema for `credentials.oidc_authentication`

Required:

- `iam_role_arn` (String) The ARN of the IAM role to assume.

## Import

Import is supported using the following syntax:

```shell
# Import account level awskms connector 
terraform import harness_platform_connector_awskms.example <connector_id>

# Import org level awskms connector 
terraform import harness_platform_connector_awskms.example <ord_id>/<connector_id>

# Import project level awskms connector 
terraform import harness_platform_connector_awskms.example <org_id>/<project_id>/<connector_id>
```

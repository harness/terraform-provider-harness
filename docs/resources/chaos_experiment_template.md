---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harness_chaos_experiment_template Resource - terraform-provider-harness"
subcategory: ""
description: |-
  Resource for managing Harness Chaos Experiment Templates. Experiment templates define reusable chaos experiments with actions, faults, and probes.
---

# harness_chaos_experiment_template (Resource)

Resource for managing Harness Chaos Experiment Templates. Experiment templates define reusable chaos experiments with actions, faults, and probes.

## Example Usage

```terraform
# ============================================================================
# Harness Chaos Experiment Template Resource Examples
# ============================================================================
#
# Experiment templates define complete chaos experiments with actions, faults, and probes.
# These examples are based on TESTED configurations from the e2e-test suite.
#
# Key Points:
# - Templates combine actions, faults, and probes into workflows
# - Vertices define execution order (workflow graph)
# - Runtime inputs supported: "<+input>" or "<+input>.default('value')"
# - Enterprise features: is_enterprise = true
# ============================================================================

# ----------------------------------------------------------------------------
# Example 1: Simple Fault Template (TESTED ✅)
# ----------------------------------------------------------------------------
# Basic template with single fault

resource "harness_chaos_experiment_template" "simple_fault" {
  depends_on = [harness_chaos_hub_v2.project_level]

  org_id       = harness_platform_organization.this.id
  project_id   = harness_platform_project.this.id
  hub_identity = harness_chaos_hub_v2.project_level.identity

  identity    = "simple-pod-delete"
  name        = "Simple Pod Delete Experiment"
  description = "Basic experiment with single pod delete fault"
  tags        = ["kubernetes", "pod-delete", "simple"]

  spec {
    infra_type = "KubernetesV2"

    faults {
      identity      = "pod-delete"
      name          = "pod-delete-fault"
      revision      = "v1"
      is_enterprise = true
      auth_enabled  = false

      values {
        name  = "TARGET_WORKLOAD_KIND"
        value = "deployment"
      }

      values {
        name  = "TARGET_WORKLOAD_NAMESPACE"
        value = "<+input>.default('default')"
      }

      values {
        name  = "TOTAL_CHAOS_DURATION"
        value = "<+input>.default('30s')"
      }
    }

    vertices {
      name = "pod-delete-vertex"
      start {
        faults {
          name = "pod-delete-fault"
        }
      }
      end {}
    }

    cleanup_policy = "delete"
  }
}

# ----------------------------------------------------------------------------
# Example 2: Template with Action and Fault (TESTED ✅)
# ----------------------------------------------------------------------------
# Template combining action and fault

resource "harness_chaos_experiment_template" "with_action" {
  depends_on = [harness_chaos_hub_v2.project_level]

  org_id       = harness_platform_organization.this.id
  project_id   = harness_platform_project.this.id
  hub_identity = harness_chaos_hub_v2.project_level.identity

  identity    = "action-and-fault"
  name        = "Action and Fault Experiment"
  description = "Experiment with action before fault"
  tags        = ["kubernetes", "action", "fault"]

  spec {
    infra_type = "KubernetesV2"

    # Action: Pre-chaos notification
    actions {
      identity               = "notification-action"
      name                   = "pre-chaos-notification"
      is_enterprise          = false
      continue_on_completion = false

      values {
        name  = "MESSAGE"
        value = "Starting chaos experiment"
      }
    }

    # Fault: Container kill
    faults {
      identity      = "container-kill"
      name          = "container-kill-fault"
      revision      = "v1"
      is_enterprise = true
      auth_enabled  = false

      values {
        name  = "TARGET_WORKLOAD_KIND"
        value = "deployment"
      }

      values {
        name  = "TARGET_WORKLOAD_NAMESPACE"
        value = "<+input>"
      }

      values {
        name  = "TOTAL_CHAOS_DURATION"
        value = "<+input>.default('30s')"
      }
    }

    # Workflow: Action first, then fault
    vertices {
      name = "action-vertex"
      start {
        actions {
          name = "pre-chaos-notification"
        }
      }
      end {}
    }

    vertices {
      name = "fault-vertex"
      start {
        faults {
          name = "container-kill-fault"
        }
      }
      end {}
    }

    cleanup_policy = "delete"
  }
}

# ----------------------------------------------------------------------------
# Example 3: Complex Template with Probes (TESTED ✅)
# ----------------------------------------------------------------------------
# Complete template with actions, faults, and probes

resource "harness_chaos_experiment_template" "complex" {
  depends_on = [harness_chaos_hub_v2.project_level]

  org_id       = harness_platform_organization.this.id
  project_id   = harness_platform_project.this.id
  hub_identity = harness_chaos_hub_v2.project_level.identity

  identity    = "complex-experiment"
  name        = "Complex Chaos Experiment"
  description = "Complete experiment with actions, faults, and probes"
  tags        = ["kubernetes", "complex", "enterprise"]

  spec {
    infra_type = "KubernetesV2"

    # Action: Start notification
    actions {
      identity               = "notification-action"
      name                   = "start-notification"
      is_enterprise          = false
      continue_on_completion = false

      values {
        name  = "MESSAGE"
        value = "Chaos experiment started"
      }
    }

    # Fault 1: Pod delete
    faults {
      identity      = "pod-delete"
      name          = "pod-delete-fault"
      revision      = "v1"
      is_enterprise = true
      auth_enabled  = false

      values {
        name  = "TARGET_WORKLOAD_KIND"
        value = "deployment"
      }

      values {
        name  = "TARGET_WORKLOAD_NAMESPACE"
        value = "<+input>"
      }

      values {
        name  = "TOTAL_CHAOS_DURATION"
        value = "<+input>.default('30s')"
      }
    }

    # Fault 2: Network latency
    faults {
      identity      = "pod-network-latency"
      name          = "network-latency-fault"
      revision      = "v1"
      is_enterprise = true
      auth_enabled  = false

      values {
        name  = "TARGET_WORKLOAD_KIND"
        value = "deployment"
      }

      values {
        name  = "TARGET_WORKLOAD_NAMESPACE"
        value = "<+input>"
      }

      values {
        name  = "NETWORK_LATENCY"
        value = "<+input>.default('2000')"
      }
    }

    # Probe 1: Pod status check
    probes {
      identity               = "pod-status-check"
      name                   = "pod-status-probe"
      revision               = "v1"
      is_enterprise          = true
      duration               = 30
      weightage              = 10
      enable_data_collection = false

      conditions = ["onChaosStart", "duringChaos", "afterChaos"]

      values {
        name  = "TARGET_NAMESPACE"
        value = "<+input>"
      }
    }

    # Probe 2: HTTP health check
    probes {
      identity               = "http-health-check"
      name                   = "http-health-probe"
      revision               = "v1"
      is_enterprise          = true
      duration               = 30
      weightage              = 10
      enable_data_collection = false

      conditions = ["duringChaos", "afterChaos"]

      values {
        name  = "URL"
        value = "<+input>"
      }
    }

    # Workflow: 3 stages
    vertices {
      name = "action-stage"
      start {
        actions {
          name = "start-notification"
        }
      }
      end {}
    }

    vertices {
      name = "fault-stage"
      start {
        faults {
          name = "pod-delete-fault"
        }
        faults {
          name = "network-latency-fault"
        }
        probes {
          name = "pod-status-probe"
        }
        probes {
          name = "http-health-probe"
        }
      }
      end {}
    }

    vertices {
      name = "cleanup-stage"
      start {}
      end {}
    }

    cleanup_policy = "delete"

    status_check_timeouts {
      delay   = 5
      timeout = 300
    }
  }
}

# ----------------------------------------------------------------------------
# Key Fields Reference
# ----------------------------------------------------------------------------
# Required:
#   - org_id, project_id (scope)
#   - hub_identity (hub where template is stored)
#   - identity (template identifier)
#   - name (template display name)
#   - spec.infra_type (e.g., "KubernetesV2")
#   - spec.vertices (workflow graph)
#
# Optional:
#   - description
#   - tags
#   - spec.actions (action templates to use)
#   - spec.faults (fault templates to use)
#   - spec.probes (probe templates to use)
#   - spec.cleanup_policy ("delete" or "retain")
#   - spec.status_check_timeouts (delay, timeout)
#
# Actions/Faults/Probes:
#   - identity: Template identity to reference
#   - name: Instance name in workflow
#   - revision: Template version (default: "v1")
#   - is_enterprise: Use enterprise features
#   - values: Parameter overrides (name, value)
#
# Probes Additional Fields:
#   - duration: Probe duration in seconds
#   - weightage: Probe importance (0-100)
#   - enable_data_collection: Collect probe data
#   - conditions: When to run (onChaosStart, duringChaos, afterChaos)
#
# Vertices (Workflow):
#   - name: Stage name
#   - start: Resources to execute at start (actions, faults, probes)
#   - end: Resources to execute at end (usually empty)
#
# Runtime Inputs:
#   - Use "<+input>" for required runtime input
#   - Use "<+input>.default('value')" for optional with default
#
# Computed (read-only):
#   - template_id, created_at, updated_at
#
# Import Format: org_id/project_id/hub_identity/identity
# Example: terraform import harness_chaos_experiment_template.example \
#          my_org/my_project/my-hub/my-template
# ----------------------------------------------------------------------------
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `hub_identity` (String) Hub identifier where the template is stored
- `identity` (String) Unique identifier for the experiment template
- `name` (String) Name of the experiment template
- `spec` (Block List, Min: 1, Max: 1) Specification of the experiment template (see [below for nested schema](#nestedblock--spec))

### Optional

- `description` (String) Description of the experiment template
- `org_id` (String) Organization identifier
- `project_id` (String) Project identifier
- `tags` (List of String) Tags associated with the experiment template

### Read-Only

- `api_version` (String) API version of the experiment template
- `id` (String) The ID of this resource.
- `is_default` (Boolean) Whether this is a default template
- `kind` (String) Kind of the experiment template
- `revision` (String) Revision of the experiment template

<a id="nestedblock--spec"></a>
### Nested Schema for `spec`

Required:

- `infra_type` (String) Infrastructure type (Windows, Linux, CloudFoundry, Container, Kubernetes, KubernetesV2)

Optional:

- `actions` (Block List) List of actions in the experiment (see [below for nested schema](#nestedblock--spec--actions))
- `cleanup_policy` (String) Cleanup policy for experiment resources (retain, delete)
- `faults` (Block List) List of faults in the experiment (see [below for nested schema](#nestedblock--spec--faults))
- `infra_id` (String) Infrastructure identifier (supports runtime input: <+input>)
- `probes` (Block List) List of probes in the experiment (see [below for nested schema](#nestedblock--spec--probes))
- `status_check_timeouts` (Block List, Max: 1) Status check timeout configuration (see [below for nested schema](#nestedblock--spec--status_check_timeouts))
- `vertices` (Block List) Workflow graph vertices defining execution order (see [below for nested schema](#nestedblock--spec--vertices))

<a id="nestedblock--spec--actions"></a>
### Nested Schema for `spec.actions`

Required:

- `identity` (String) Action template identity
- `name` (String) Action name

Optional:

- `continue_on_completion` (Boolean) Whether to continue on completion
- `infra_id` (String) Infrastructure identifier for this action
- `is_enterprise` (Boolean) Whether this is an enterprise action
- `revision` (Number) Action template revision
- `values` (Block List) Variable values for the action (see [below for nested schema](#nestedblock--spec--actions--values))

<a id="nestedblock--spec--actions--values"></a>
### Nested Schema for `spec.actions.values`

Required:

- `name` (String) Variable name
- `value` (String) Variable value (supports runtime input: <+input>)



<a id="nestedblock--spec--faults"></a>
### Nested Schema for `spec.faults`

Required:

- `identity` (String) Fault template identity
- `name` (String) Fault name

Optional:

- `auth_enabled` (Boolean) Whether authentication is enabled
- `infra_id` (String) Infrastructure identifier for this fault
- `is_enterprise` (Boolean) Whether this is an enterprise fault
- `revision` (String) Fault template revision
- `values` (Block List) Variable values for the fault (see [below for nested schema](#nestedblock--spec--faults--values))

<a id="nestedblock--spec--faults--values"></a>
### Nested Schema for `spec.faults.values`

Required:

- `name` (String) Variable name
- `value` (String) Variable value (supports runtime input: <+input>)



<a id="nestedblock--spec--probes"></a>
### Nested Schema for `spec.probes`

Required:

- `identity` (String) Probe template identity
- `name` (String) Probe name

Optional:

- `conditions` (Block List) Probe execution conditions (see [below for nested schema](#nestedblock--spec--probes--conditions))
- `duration` (String) Probe duration
- `enable_data_collection` (Boolean) Whether to enable data collection
- `infra_id` (String) Infrastructure identifier for this probe
- `is_enterprise` (Boolean) Whether this is an enterprise probe
- `revision` (Number) Probe template revision
- `values` (Block List) Variable values for the probe (see [below for nested schema](#nestedblock--spec--probes--values))
- `weightage` (Number) Probe weightage for resilience score calculation

<a id="nestedblock--spec--probes--conditions"></a>
### Nested Schema for `spec.probes.conditions`

Required:

- `execute_upon` (String) When to execute the probe (onChaosStart, duringChaos, afterChaos)


<a id="nestedblock--spec--probes--values"></a>
### Nested Schema for `spec.probes.values`

Required:

- `name` (String) Variable name
- `value` (String) Variable value (supports runtime input: <+input>)



<a id="nestedblock--spec--status_check_timeouts"></a>
### Nested Schema for `spec.status_check_timeouts`

Optional:

- `delay` (Number) Delay before status check (in seconds)
- `timeout` (Number) Timeout for status check (in seconds)


<a id="nestedblock--spec--vertices"></a>
### Nested Schema for `spec.vertices`

Required:

- `name` (String) Vertex name

Optional:

- `end` (Block List, Max: 1) End configuration for the vertex (see [below for nested schema](#nestedblock--spec--vertices--end))
- `start` (Block List, Max: 1) Start configuration for the vertex (see [below for nested schema](#nestedblock--spec--vertices--start))

<a id="nestedblock--spec--vertices--end"></a>
### Nested Schema for `spec.vertices.end`

Optional:

- `actions` (Block List) Actions to execute at end (see [below for nested schema](#nestedblock--spec--vertices--end--actions))
- `faults` (Block List) Faults to execute at end (see [below for nested schema](#nestedblock--spec--vertices--end--faults))
- `probes` (Block List) Probes to execute at end (see [below for nested schema](#nestedblock--spec--vertices--end--probes))

<a id="nestedblock--spec--vertices--end--actions"></a>
### Nested Schema for `spec.vertices.end.actions`

Required:

- `name` (String) Action name


<a id="nestedblock--spec--vertices--end--faults"></a>
### Nested Schema for `spec.vertices.end.faults`

Required:

- `name` (String) Fault name


<a id="nestedblock--spec--vertices--end--probes"></a>
### Nested Schema for `spec.vertices.end.probes`

Required:

- `name` (String) Probe name



<a id="nestedblock--spec--vertices--start"></a>
### Nested Schema for `spec.vertices.start`

Optional:

- `actions` (Block List) Actions to execute at start (see [below for nested schema](#nestedblock--spec--vertices--start--actions))
- `faults` (Block List) Faults to execute at start (see [below for nested schema](#nestedblock--spec--vertices--start--faults))
- `probes` (Block List) Probes to execute at start (see [below for nested schema](#nestedblock--spec--vertices--start--probes))

<a id="nestedblock--spec--vertices--start--actions"></a>
### Nested Schema for `spec.vertices.start.actions`

Required:

- `name` (String) Action name


<a id="nestedblock--spec--vertices--start--faults"></a>
### Nested Schema for `spec.vertices.start.faults`

Required:

- `name` (String) Fault name


<a id="nestedblock--spec--vertices--start--probes"></a>
### Nested Schema for `spec.vertices.start.probes`

Required:

- `name` (String) Probe name

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# Example 1: Import Project-level Experiment Template
# Format: org_id/project_id/hub_identity/template_identity
terraform import harness_chaos_experiment_template.simple_fault \
  my_org/my_project/my-chaos-hub/simple-pod-delete-experiment

# Example 2: Import Org-level Experiment Template
# Format: org_id/hub_identity/template_identity
terraform import harness_chaos_experiment_template.org_level \
  my_org/org-chaos-hub/org-experiment-template

# Example 3: Import Account-level Experiment Template
# Format: hub_identity/template_identity
terraform import harness_chaos_experiment_template.account_level \
  account-chaos-hub/account-experiment-template

# Example 4: Import Comprehensive Experiment Template
terraform import harness_chaos_experiment_template.comprehensive \
  my_org/my_project/my-chaos-hub/comprehensive-experiment

# Example 5: Import Multi-Fault Experiment Template
terraform import harness_chaos_experiment_template.multi_fault \
  my_org/my_project/my-chaos-hub/multi-fault-experiment
```

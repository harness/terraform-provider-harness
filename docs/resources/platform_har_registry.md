---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harness_platform_har_registry Resource - terraform-provider-harness"
subcategory: "Next Gen"
description: |-
  Resource for creating and managing Harness Registries.
---

# harness_platform_har_registry (Resource)

Resource for creating and managing Harness Registries.

**Note:**
> In Harness Artifact Registry, a **Virtual** registry is functionally equivalent to what is commonly referred to as a **Local** registry in other systems.
## Example Usage

```terraform
# Example of a Virtual Registry
resource "harness_platform_har_registry" "virtual_registry" {
  identifier    = "virtual_docker_registry"
  description   = "Virtual Docker Registry"
  space_ref     = "accountId/orgId/projectId"
  package_type  = "DOCKER"

  config {
    type = "VIRTUAL"
    upstream_proxies = ["registry1", "registry2"]
  }
  parent_ref = "accountId/orgId/projectId"
}

# Example of an Upstream Registry with Authentication
resource "harness_platform_har_registry" "upstream_registry" {
  identifier    = "upstream_helm_registry"
  description   = "Upstream Helm Registry"
  space_ref     = "accountId/orgId/projectId"
  package_type  = "HELM"

  config {
    type   = "UPSTREAM"
    source = "CUSTOM"
    url    = "https://helm.sh"
    auth {
      auth_type         = "UserPassword"
      user_name         = "registry_user"
      secret_identifier = "registry_password"
      secret_space_path = "accountId/orgId/projectId"
    }
  }
  parent_ref = "accountId/orgId/projectId"
}
```

## Schema

### Required

- `identifier` (String) Unique identifier of the registry
- `package_type` (String) Type of package (DOCKER, HELM, MAVEN, etc.)
- `parent_ref` (String) Parent reference for the registry (required for creation)
- `space_ref` (String) Space reference for the registry (required for creation)

### Optional

- `allowed_pattern` (List of String) Allowed artifact patterns
- `blocked_pattern` (List of String) Blocked artifact patterns
- `config` (Block List, Max: 1) Configuration for the registry (see [below for nested schema](#nestedblock--config))
- `description` (String) Description of the registry

### Read-Only

- `created_at` (String) Creation timestamp
- `id` (String) The ID of this resource.
- `url` (String) URL of the registry

<a id="nestedblock--config"></a>
### Nested Schema for `config`

Required:

- `type` (String) Type of registry (VIRTUAL or UPSTREAM)

Optional:

- `auth` (Block List, Max: 1) Authentication configuration for UPSTREAM registry type (see [below for nested schema](#nestedblock--config--auth))
- `auth_type` (String) Type of authentication for UPSTREAM registry type (UserPassword, Anonymous, AccessKeySecretKey)
- `source` (String) Upstream source
- `upstream_proxies` (List of String) List of upstream proxies for VIRTUAL registry type
- `url` (String) URL of the upstream (required if type=UPSTREAM & package_type=HELM)

~> **Note:** For UPSTREAM registries, authentication is **required**. You must provide either the `auth_type` field or the `auth` block. Additionally, `source` is required for UPSTREAM registries.

<a id="nestedblock--config--auth"></a>
### Nested Schema for `config.auth`

Required:

- `auth_type` (String) Type of authentication (UserPassword, Anonymous)

Optional:

- `access_key` (String, Sensitive)
- `access_key_identifier` (String)
- `access_key_secret_path` (String)
- `secret_identifier` (String) Secret identifier for UserPassword auth type
- `secret_key_identifier` (String)
- `secret_key_secret_path` (String)
- `secret_space_path` (String) Secret space path for UserPassword auth type
- `user_name` (String) Username for UserPassword auth type

## Import

Import is supported using the following syntax:

### Import Format

The import ID format is: `<space_ref>/<identifier>`

Where:
- `space_ref` defines the scope: account, org, or project level
- `identifier` is the unique registry identifier

### Import Examples

```bash
# Account level: <account_id>/<registry_identifier>
# Org level: <account_id>/<org_id>/<registry_identifier>
# Project level: <account_id>/<org_id>/<project_id>/<registry_identifier>
terraform import harness_platform_har_registry.example <space_ref>/<registry_identifier>
```

### After Import

```bash
terraform plan
terraform apply
```

---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harness_platform_infra_provider_version_file Resource - terraform-provider-harness"
subcategory: "Next Gen"
description: |-
  Resource for uploading files to Terraform/OpenTofu Provider Versions in the IaCM Provider Registry.
---

# harness_platform_infra_provider_version_file (Resource)

Resource for uploading files to Terraform/OpenTofu Provider Versions in the IaCM Provider Registry.

## Example Usage

```terraform
# First, create a provider
resource "harness_platform_infra_provider" "aws" {
  type        = "aws"
  description = "AWS provider for IaCM"
}

# Create a version
resource "harness_platform_infra_provider_version" "aws_v5" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = "5.0.0"
  gpg_key_id  = "your-gpg-key-id"
  protocols   = ["5.0", "6.0"]
}

# Upload files for different platforms
resource "harness_platform_infra_provider_version_file" "aws_linux_amd64" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version
  file_path   = "./terraform-provider-aws_5.0.0_linux_amd64.zip"
}

resource "harness_platform_infra_provider_version_file" "aws_darwin_amd64" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version
  file_path   = "./terraform-provider-aws_5.0.0_darwin_amd64.zip"
}

resource "harness_platform_infra_provider_version_file" "aws_windows_amd64" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version
  file_path   = "./terraform-provider-aws_5.0.0_windows_amd64.zip"
}

# Upload SHA256SUMS and signature files
resource "harness_platform_infra_provider_version_file" "aws_shasums" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version
  file_path   = "./terraform-provider-aws_5.0.0_SHA256SUMS"
}

resource "harness_platform_infra_provider_version_file" "aws_shasums_sig" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version
  file_path   = "./terraform-provider-aws_5.0.0_SHA256SUMS.sig"
}

# Optional: Override the uploaded filename if different from local filename
resource "harness_platform_infra_provider_version_file" "custom_name" {
  provider_id = harness_platform_infra_provider.aws.id
  version     = harness_platform_infra_provider_version.aws_v5.version
  file_path   = "./local-file.zip"
  filename    = "terraform-provider-aws_5.0.0_custom.zip"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `provider_id` (String) The ID of the provider.
- `version` (String) Provider version number.
- `file_path` (String) Local path to the file to upload. Required for uploading file content.

### Optional

- `filename` (String) Name of the file to upload (e.g., terraform-provider-aws_5.0.0_linux_amd64.zip). If not provided, will be derived from file_path. Use this to override the uploaded filename if it should differ from the local filename.

### Read-Only

- `id` (String) The ID of this resource in the format `provider_id/version/filename`.
- `synced` (Boolean) Indicates if the provider version is synced after file upload.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import harness_platform_infra_provider_version_file.example <provider_id>/<version>/<filename>
```

## Notes

- Files cannot be updated once uploaded. To change a file, you must delete and recreate the resource.
- When `file_path` is provided, the resource reads the local file and uploads its content to the provider registry.
- The `filename` is automatically derived from `file_path` if not explicitly provided.
- Common files to upload include:
  - Platform-specific provider binaries (e.g., `terraform-provider-aws_5.0.0_linux_amd64.zip`)
  - SHA256SUMS file for verification
  - SHA256SUMS.sig signature file for GPG verification
- Files are uploaded as raw binary content with `Content-Type: application/octet-stream`.

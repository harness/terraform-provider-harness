---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "harness_connector Resource - terraform-provider-harness"
subcategory: ""
description: |-
  Resource for creating a connector. This resource is part of the Harness nextgen platform.
---

# harness_connector (Resource)

Resource for creating a connector. This resource is part of the Harness nextgen platform.

## Example Usage

```terraform
# Create a kubernetes connector

resource "harness_connector" "test" {
  identifier = "k8s"
  name       = "Test Kubernetes Cluster"

  k8s_cluster {
    service_account {
      master_url                = "https://kubernetes.example.com"
      service_account_token_ref = "account.k8s_service_account_token"
    }
  }
}

# Create a docker registry connector

resource "harness_connector" "test" {
  identifier = "dockerhub"
  name       = "Docker Hub"

  docker_registry {
    type = "DockerHub"
    url  = "https://hub.docker.io"

    credentials {
      username     = "admin"
      password_ref = "account.docker_registry_password"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **identifier** (String) The unique identifier for the connector.
- **name** (String) The name of the connector.

### Optional

- **aws** (Block List, Max: 1) Aws account configuration. (see [below for nested schema](#nestedblock--aws))
- **branch** (String) The branch to use for the connector.
- **description** (String) The description of the connector.
- **docker_registry** (Block List, Max: 1) The docker registry to use for the connector. (see [below for nested schema](#nestedblock--docker_registry))
- **gcp** (Block List, Max: 1) Gcp connector configuration. (see [below for nested schema](#nestedblock--gcp))
- **id** (String) The ID of this resource.
- **k8s_cluster** (Block List, Max: 1) The k8s cluster to use for the connector. (see [below for nested schema](#nestedblock--k8s_cluster))
- **org_id** (String) The unique identifier for the organization.
- **project_id** (String) The unique identifier for the project.
- **repo_id** (String) The unique identifier for the repository.
- **tags** (Set of String) Tags associated with the connector.

<a id="nestedblock--aws"></a>
### Nested Schema for `aws`

Optional:

- **cross_account_access** (Block List, Max: 1) Select this option if you want to use one AWS account for the connection, but you want to deploy or build in a different AWS account. In this scenario, the AWS account used for AWS access in Credentials will assume the IAM role you specify in Cross-account role ARN setting. This option uses the AWS Security Token Service (STS) feature. (see [below for nested schema](#nestedblock--aws--cross_account_access))
- **inherit_from_delegate** (Block List, Max: 1) Inherit credentials from the delegate. (see [below for nested schema](#nestedblock--aws--inherit_from_delegate))
- **irsa** (Block List, Max: 1) Use IAM role for service accounts. (see [below for nested schema](#nestedblock--aws--irsa))
- **manual** (Block List, Max: 1) Use IAM role for service accounts. (see [below for nested schema](#nestedblock--aws--manual))

<a id="nestedblock--aws--cross_account_access"></a>
### Nested Schema for `aws.cross_account_access`

Required:

- **role_arn** (String) The Amazon Resource Name (ARN) of the role that you want to assume. This is an IAM role in the target AWS account.

Optional:

- **external_id** (String) If the administrator of the account to which the role belongs provided you with an external ID, then enter that value.


<a id="nestedblock--aws--inherit_from_delegate"></a>
### Nested Schema for `aws.inherit_from_delegate`

Required:

- **delegate_selectors** (Set of String) The delegates to inherit the credentials from.


<a id="nestedblock--aws--irsa"></a>
### Nested Schema for `aws.irsa`

Required:

- **delegate_selectors** (Set of String) The delegates to inherit the credentials from.


<a id="nestedblock--aws--manual"></a>
### Nested Schema for `aws.manual`

Required:

- **secret_key_ref** (String) Reference to the Harness secret containing the aws secret key.

Optional:

- **access_key** (String) AWS access key.
- **access_key_ref** (String) Reference to the Harness secret containing the aws access key.
- **delegate_selectors** (Set of String) Connect only use deleagates with these tags.



<a id="nestedblock--docker_registry"></a>
### Nested Schema for `docker_registry`

Required:

- **type** (String) The type of the docker registry. Valid options are DockerHub, Harbor, Other, Quay
- **url** (String) The url of the docker registry.

Optional:

- **credentials** (Block List, Max: 1) The credentials to use for the docker registry. If not specified then the connection is made to the registry anonymously. (see [below for nested schema](#nestedblock--docker_registry--credentials))
- **delegate_selectors** (Set of String) Connect using only the delegates which have these tags.

<a id="nestedblock--docker_registry--credentials"></a>
### Nested Schema for `docker_registry.credentials`

Required:

- **password_ref** (String) The reference to the password to use for the docker registry.

Optional:

- **username** (String) The username to use for the docker registry.
- **username_ref** (String) The reference to the username to use for the docker registry.



<a id="nestedblock--gcp"></a>
### Nested Schema for `gcp`

Optional:

- **inherit_from_delegate** (Block List) Inherit configuration from delegate. (see [below for nested schema](#nestedblock--gcp--inherit_from_delegate))
- **manual** (Block List, Max: 1) Manual credential configuration. (see [below for nested schema](#nestedblock--gcp--manual))

<a id="nestedblock--gcp--inherit_from_delegate"></a>
### Nested Schema for `gcp.inherit_from_delegate`

Required:

- **delegate_selectors** (Set of String) The delegates to inherit the credentials from.


<a id="nestedblock--gcp--manual"></a>
### Nested Schema for `gcp.manual`

Required:

- **delegate_selectors** (Set of String) The delegates to connect with.
- **secret_key_ref** (String) Reference to the Harness secret containing the secret key.



<a id="nestedblock--k8s_cluster"></a>
### Nested Schema for `k8s_cluster`

Optional:

- **client_key_cert** (Block List, Max: 1) Client key and certificate config for the connector. (see [below for nested schema](#nestedblock--k8s_cluster--client_key_cert))
- **inherit_from_delegate** (Block List, Max: 1) Credentials are inherited from the delegate. (see [below for nested schema](#nestedblock--k8s_cluster--inherit_from_delegate))
- **openid_connect** (Block List, Max: 1) OpenID configuration for the connector. (see [below for nested schema](#nestedblock--k8s_cluster--openid_connect))
- **service_account** (Block List, Max: 1) Service account for the connector. (see [below for nested schema](#nestedblock--k8s_cluster--service_account))
- **username_password** (Block List, Max: 1) Username and password for the connector. (see [below for nested schema](#nestedblock--k8s_cluster--username_password))

<a id="nestedblock--k8s_cluster--client_key_cert"></a>
### Nested Schema for `k8s_cluster.client_key_cert`

Required:

- **client_cert_ref** (String) Reference to the secret containing the client certificate for the connector.
- **client_key_algorithm** (String) The algorithm used to generate the client key for the connector. Valid values are RSA, EC
- **client_key_ref** (String) Reference to the secret containing the client key for the connector.
- **master_url** (String) The URL of the Kubernetes cluster.

Optional:

- **ca_cert_ref** (String) Reference to the secret containing the CA certificate for the connector.
- **client_key_passphrase_ref** (String) Reference to the secret containing the client key passphrase for the connector.


<a id="nestedblock--k8s_cluster--inherit_from_delegate"></a>
### Nested Schema for `k8s_cluster.inherit_from_delegate`

Required:

- **delegate_selectors** (Set of String) Selectors to use for the delegate.


<a id="nestedblock--k8s_cluster--openid_connect"></a>
### Nested Schema for `k8s_cluster.openid_connect`

Required:

- **client_id_ref** (String) Reference to the secret containing the client ID for the connector.
- **issuer_url** (String) The URL of the OpenID Connect issuer.
- **master_url** (String) The URL of the Kubernetes cluster.
- **password_ref** (String) Reference to the secret containing the password for the connector.

Optional:

- **scopes** (List of String) Scopes to request for the connector.
- **secret_ref** (String) Reference to the secret containing the client secret for the connector.
- **username** (String) Username for the connector.
- **username_ref** (String) Reference to the secret containing the username for the connector.


<a id="nestedblock--k8s_cluster--service_account"></a>
### Nested Schema for `k8s_cluster.service_account`

Required:

- **master_url** (String) The URL of the Kubernetes cluster.
- **service_account_token_ref** (String) Reference to the secret containing the service account token for the connector.


<a id="nestedblock--k8s_cluster--username_password"></a>
### Nested Schema for `k8s_cluster.username_password`

Required:

- **master_url** (String) The URL of the Kubernetes cluster.
- **password_ref** (String) Reference to the secret containing the password for the connector.

Optional:

- **username** (String) Username for the connector.
- **username_ref** (String) Reference to the secret containing the username for the connector.

## Import

Import is supported using the following syntax:

```shell
# Import an account level connector
terraform import harness_connector.example <connector_id>

# Import an organization level connector
terraform import harness_connector.example <organization_id>/<connector_id>

# Import an project level connector
terraform import harness_connector.example <organization_id>/<project_id>/<connector_id>
```
